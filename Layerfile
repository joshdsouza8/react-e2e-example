# Node 12 Image
FROM webapp.io/node:12

# node is a memory hog
MEMORY 2G
ENV NODE_OPTIONS=--max-old-space-size=8192
    
COPY . .
RUN mkdir cypress
RUN npm install
RUN BACKGROUND npm start
RUN BACKGROUND cd cypress && python3 -m http.server 8000

RUN ./node_modules/.bin/cypress run

# start a webserver to view test results, open
EXPOSE WEBSITE http://localhost:8000
